$(function(){function s(){$(".chat-bg aside").scrollTop($(".chat-bg aside")[0].scrollHeight)}function a(s){var a={},n={name:sessionStorage.getItem("name"),avator:sessionStorage.getItem("avator")};a.user=n,a.text=s,a.text&&a.user.name&&i.send(a)}var n=$(".inputMessage"),e=$(".chat-btn"),i=io();i.on("connect",function(){i.emit("join")}),i.on("sys",function(s){$(".online-num").html(s)}),i.on("new message",function(a){$(".messages").append('<div class="row"><div class="columns small-1"><img src="'+a.user.avator+'"  class="avator-small img-radius"></div><div class="columns small-11 medium-10"><small class="subheader">'+a.user.name+'</small><p><span class="msg-item">'+a.text+"</span></p></div></div>"),s()}),i.on("my message",function(a){$(".messages").append('<div class="row"><div class="small-9 columns clearfix"><p class="float-right"><span class="msg-item">'+a.text+'</span></p></div><div class="small-1 columns end"><img src="'+a.user.avator+'"  class="avator-small img-radius"></div></div>'),s()}),n.on("focus",function(s){return sessionStorage.getItem("name")?void 0:void $("#login-modal").foundation("open")}),n.on("keydown",function(s){if(13===s.which){var n=$(this).val();a(n),$(this).val("")}}),e.on("click",function(){var s=n.val();a(s),n.val("")})});